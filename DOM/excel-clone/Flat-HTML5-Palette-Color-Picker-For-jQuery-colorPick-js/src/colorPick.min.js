/*!
*
* ColorPick jQuery plugin
* https://github.com/philzet/ColorPick.js
*
* Copyright (c) 2017-2019 Phil Zet (a.k.a. Phil Zakharchenko)
* Licensed under the MIT License
*
*/
!function($){$.fn.colorPick=function(config){return this.each((function(){new $.colorPick(this,config||{})}))},$.colorPick=function(element,options){options=options||{},this.options=$.extend({},$.fn.colorPick.defaults,options),options.str&&(this.options.str=$.extend({},$.fn.colorPick.defaults.str,options.str)),$.fn.colorPick.defaults=this.options,this.color=this.options.initialColor.toUpperCase(),this.element=$(element);var dataInitialColor=this.element.data("initialcolor");dataInitialColor&&(this.color=dataInitialColor,this.appendToStorage(this.color));var uniquePalette=[];return $.each($.fn.colorPick.defaults.palette.map((function(x){return x.toUpperCase()})),(function(i,el){-1===$.inArray(el,uniquePalette)&&uniquePalette.push(el)})),this.palette=uniquePalette,this.element.hasClass(this.options.pickrclass)?this:this.init()},$.fn.colorPick.defaults={initialColor:"#3498db",paletteLabel:"Default palette:",allowRecent:!0,recentMax:5,allowCustomColor:!1,palette:["#1abc9c","#16a085","#2ecc71","#27ae60","#3498db","#2980b9","#9b59b6","#8e44ad","#34495e","#2c3e50","#f1c40f","#f39c12","#e67e22","#d35400","#e74c3c","#c0392b","#ecf0f1","#bdc3c7","#95a5a6","#7f8c8d"],onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color})}},$.colorPick.prototype={init:function(){var self=this,o=this.options;return $.proxy($.fn.colorPick.defaults.onColorSelected,this)(),this.element.click((function(event){var offset=$(self.element).offset();return event.preventDefault(),self.show(self.element,event.pageX-offset.left,event.pageY-offset.top),$(".customColorHash").val(self.color),$(".colorPickButton").click((function(event){return self.color=$(event.target).attr("hexValue"),self.appendToStorage($(event.target).attr("hexValue")),self.hide(),$.proxy(self.options.onColorSelected,self)(),!1})),$(".customColorHash").click((function(event){return!1})).keyup((function(event){var hash=$(this).val();0!==hash.indexOf("#")&&(hash="#"+hash),/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hash)?(self.color=hash,self.appendToStorage(hash),$.proxy(self.options.onColorSelected,self)(),$(this).removeClass("error")):$(this).addClass("error")})),!1})).blur((function(){return self.element.val(self.color),$.proxy(self.options.onColorSelected,self)(),self.hide(),!1})),$(document).on("click",(function(event){return self.hide(),!0})),this},appendToStorage:function(color){if(!0===$.fn.colorPick.defaults.allowRecent){var storedColors=JSON.parse(localStorage.getItem("colorPickRecentItems"));null==storedColors&&(storedColors=[]),-1==$.inArray(color,storedColors)&&(storedColors.unshift(color),storedColors=storedColors.slice(0,$.fn.colorPick.defaults.recentMax),localStorage.setItem("colorPickRecentItems",JSON.stringify(storedColors)))}},show:function(element,left,top){$(".colorPickWrapper").remove(),$(element).prepend('<div class="colorPickWrapper"><div id="colorPick" style="display:none;top:'+top+"px;left:"+left+'px"><span>'+$.fn.colorPick.defaults.paletteLabel+"</span></div></div>"),jQuery.each(this.palette,(function(index,item){$("#colorPick").append('<div class="colorPickButton" hexValue="'+item+'" style="background:'+item+'"></div>')})),!0===$.fn.colorPick.defaults.allowCustomColor&&$("#colorPick").append('<input type="text" style="margin-top:5px" class="customColorHash" />'),!0===$.fn.colorPick.defaults.allowRecent&&($("#colorPick").append('<span style="margin-top:5px">Recent:</span>'),null==JSON.parse(localStorage.getItem("colorPickRecentItems"))||JSON.parse(localStorage.getItem("colorPickRecentItems"))==[]?$("#colorPick").append('<div class="colorPickButton colorPickDummy"></div>'):jQuery.each(JSON.parse(localStorage.getItem("colorPickRecentItems")),(function(index,item){if($("#colorPick").append('<div class="colorPickButton" hexValue="'+item+'" style="background:'+item+'"></div>'),index==$.fn.colorPick.defaults.recentMax-1)return!1}))),$("#colorPick").fadeIn(200)},hide:function(){$(".colorPickWrapper").fadeOut(200,(function(){return $(".colorPickWrapper").remove(),this}))}}}(jQuery);